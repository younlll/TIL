# 04. 역할, 책임, 협력
## 협력
* **협력**은 한 사람이 다른 사람에게 도움을 **요청**할 때 시작된다
* 요청을 받은 사람은 일을 처리한 후에 요청한 사람에게 필요한 지식이나 서비스를 제공하는 것으로 요청에 **응답**한다

### 재판 속의 협력
* 누군가가 왕에게 재판을 **요청**함으로써 재판 시작
* 왕이 하얀 토끼에게 증인을 부를 것을 **요청**
* 왕의 요청을 받은 토끼는 모자 장수에게 증인석을 입장할 것을 **요청**
* 모자 장수는 증인석에 입장함으로써 토끼의 요청에 **응답**한다
* 모자 장수의 입장은 왕이 토끼에게 요청했던 증인 호출에 대한 **응답**이기도 하다
* 이제 왕은 모자 장수에게 증언할 것을 **요청**한다
* 모자 장수는 자신이 알고 있는 내용을 증언함으로써 왕의 요청에 **응답**한다

<br/>

## 책임
* 어떤 요청에 대해 절절한 행동을 할 의무가 있는 경우에 해당 객체가 **책임**을 가진다고 말한다

### 책임의 분류
**하는 것**
* 객체를 생성하거나 계산을 하는 등의 스스로 하는 것
* 다른 객체의 행동을 시작시키는 것
* 다른 객체의 활동을 제어하고 조절하는 것

**아는 것**
* 개인적인 정보에 관해 아는 것
* 관련된 객체에 관해 아는 것
* 자신이 유도하거나 계산할 수 있는 것에 관해 아는 것

**재판에 비유**
* 왕은 재판에 참여하는 '다른 객체들의 활동을 제어하고 조율'하고 있으므로 **하는 것에 대한 책임**을 수행한다
* 토끼는 증인을 증인석에 세우기 위해 **객체에 대해 아는 것**의 책임을 지고 있으며 증인석에 입장하라고 행동을 지시하는 **다른 객체의 행동을 시키는 하는 것**의 두 가지 책임을 모두 수행하고 있다
* 모자장수는 증언을 해야하는 책임이 있고 그것은 **증언을 스스로 하는 것**과 **자신이 유도하거나 계산할 수 있는 것에 관해 아는 것**이라는 두가지 책임을 갖고 있다

`책임은 객체의 외부에 제공해 줄 수 있는 정보와 외부에 제공해 줄 수 있는 서비스의 목록이다 = 공용 인터페이스(public interface)를 구성한다`

<br/>

## 역할
### 책임의 집합이 의마하는 것
* 객체가 수행하는 책임의 집합은 객체가 협력 안에서 수행하는 역할을 암시한다

* 왕이 모자장수와, 요리사를 재판하고 그 뒤에 여왕이 엘리스를 심문한다
* 여기서 판사의 역할에 왕과 여왕이 있고 증인의 역할은 모자장수, 요리사, 엘리스가 수행했다
* 누가 수행하냐를 제외하고서 재판의 모든 과정과 동작은 동일하다
* 그럼 이렇게 여러게의 협력 과정을 하나의 협력으로 다루고 싶어진다
* 따라서 **판사**와 **증인**이라는 **역할**을 사용하면 세가지 협력을 모두 포괄할 수 있는 하나의 협력으로 **추상화** 할 수 있다
    * 판사에게 재판을 요청함으로써 재판이 시작된다
    * 판사는 하얀 토끼에게 증인을 부를것을 요청
    * 판사의 요청을 받은 토끼는 증인에게 증인석으로 입장할 것을 요청한다
    * 증인은 증인석에 입장함으로써 토끼의 요청에 응답한다
    * 증인의 입장은 연쇄적으로 토끼에 대한 판사의 요청에 대답 응답이기도 하다
    * 이제 판사는 증인에게 증언할 것을 요청한다
    * 증인은 자신이 알고 있는 내용을 증언함으로써 판사의 요청에 응답한다

`역할이란, 해당 자리의 역할을 수행할 수 있는 어떤 객체라도 대신할 수 있다`

* 유사한 협력을 추상화해서 인지 과부하를 줄일 수 있다
* 역할은 객체지향 설계의 **단순성, 유연성, 재사용성**을 뒷받참하는 핵심 개념

<br/>

## 객체지향 설계 기법
1. 책임-주도 설계(Responsibility-Driven Design)
    * 객체의 책임을 중심으로 시스템을 구축하는 설계 방법
    * 시스템의 책임을 더 작은 객체의 책임으로 변환하고
    * 각 객체가 책임을 수행하는 중에 필요한 정보나 서비스를 제공해줄 협력자를 찾아
    * 해당 협력자에게 책임을 할당하는 순차적 방식으로 객체들의 협력 공동체를 구축한다
    * 상호작용에 집중한다
    * 설계절차
        * 시스템이 사용자에게 제공해야 하는 기능인 시스템 책임 파악
        * 시스템 책임을 더 작은 책임으로 분할
        * 분할된 책임을 수행할 수 있는 적절한 객체 또는 역할을 찾아 책임을 할당
        * 객체가 책임을 수행하는 중에 다른 객체의 도움이 필요한 경우 이를 책임질 적절한 객체 또는 역할을 찾음
        * 해당 객체 또는 역할에게 책임을 할당함으로써 두 객체가 협력하게 된다
2. 디자인 패턴(Design patter)
    * 공통으로 사용할 수 있는 역할, 책임, 협력의 템플릿이다
3. 테스트-주도 개발(Test-Driven Development)
