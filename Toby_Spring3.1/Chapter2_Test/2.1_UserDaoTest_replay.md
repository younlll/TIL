# UserDaoTest 다시보기
* 지금까지 만들었던 테스트 코드는 main() 메소드를 이용해 UserDao 오브젝트의 add(), get() 메소드를 호출하고
* 그 결과를 화면에 출력해서 확인했다
* `테스트`란 의도한대로 코드가 동작하는지 확인해서 만든 코드의 확신을 주는 작업이다
* 테스트를 통해 코드의 결함 제거하고 최종적으로 테스트를 성공하면 모든 결함이 제거됐다는 확신을 얻을 수 있다

## UserDaoTest의 특징
* 지금까지 **main() 메소드에 테스트** 한 내용을 보면
* **UserDao의 오브젝트를 가져와 메소드를 호출한다**
* input data를 직접 코드로 넣어준다
* 테스트 결과를 콘솔로 출력한다
* 각 단계의 작업이 에러 없이 끝나면 콘솔에 성공 메시지를 출력해준다

### 웹을 통한 DAO 테스트 방법의 문제점
* 가장 흔하게 DAO 테스트를 하는 방법으로 웹 화면을 통해 값을 입력하고 기능을 동작하고 결과 확인을 통해 테스트 하는 것이다
* 이 방법은 DAO 테스트를 위해 모든 레이어의 기능을 다 만들고 나서야 테스트가 가능하고
* 테스트 중 오류가 나더라도 DAO의 오류가 아닌 다른 부분의 오류 일 수 있어 쉽게 오류파악을 하기에 어려움이 있다

#### 효율적으로 테스트를 활용할 수 있는 방법은 뭐가 있을까

### 작은 단위의 테스트
* 테스트하고자 하는 대상이 명확하다면 그 대상에만 집중해서 테스트하는 것이 바람직하다
* 테스트는 가능하면 **작은 단위로 쪼개서 집중할 수 있어야 한다**
* 이런 작은 단위의 코드에 대해 테스트를 수행한 것을 `단위 테스트(unit test)`라고 한다

</br>

* 1장에서 테스트 시 사용한 UserDaoTest는 사용자를 등록하고 조회하는 한가지 관심사에 집중할 수 있도록 만들어진 단위 테스트이다
* 하지만 UserDaoTest를 수행할때 사용할 DB의 상태가 매번 달라지고 테스트를 위해 DB를 특정 상태로 만들어줄 수 없다면
* 그때는 UserDaoTest가 단위 테스트로서 가치가 없어진다

</br>

* 때로는 애플리케이션 전 계층이 참여하고 로그인부터 기능을 사용하고 로그아웃까지 하는 전 과정을 하나로 묶어서 테스트 할 필요가 있다
* 하지만 이때도 작은 단위의 테스트를 통해 충분한 검증을 마쳤기 때문에 전체 테스트 시 발생하는 오류 대응이
* 처음부터 전 과정에 대한 테스트를 진행 하는 경우보다 훨씨 오류를 파악하기 쉽고 오류가 발생할 확률이 적을 것이다


### 자동수행 테스트 코드
* 웹 화면에서 매번 user의 등록 값을 개발자가 입력하여 동작하고 테스트하는 것이 아니라
* 테스트가 코드로 만들어져 자동으로 수행될 수 있어야 한다
* UserDaoTest 같은 경우, main() 메소드를 통해 자동으로 테스트를 할 수 있다

  **장점**
  * 자주 반복할 수 있다
  * 언제든 코드를 수정하고 나서 테스트 해 볼수 있다


### 지속적인 개선과 점진적인 개발을 위한 테스트
* 테스트를 만들어 두어 코드를 점진적으로 개선해 나갈때마다 테스트를 통해 정상 동작 유무를 확인해가며 작업 할 수 있다
* 또한, 기능이 추가가 되더라도 테스트 코드에 추가된 기능을 테스트하는 내용을 추가할 수 잇다
* 이렇게 점진적인 개발이 가능하다
* 테스트를 이용하면 새로운 기능에 대해 잘 동작하는지 확인 할 수 있을뿐 아니라
* 기존에 만들어 뒀던 기능들이 새로운 기능을 추가하느라 수정한 코드에 영향을 받지 않고 잘 동작하는지를 확인 할 수 있다

</br>

## UserDaoTest의 문제점
1. 수동 확인 작업의 번거로움
  * add()에서 User정보를 DB에 등록하고 get()을 이용해 가져왔을 때, 입력한 값과 저장된 가져온 값이 일치하는지는 사람이 확인해야한다

2. 실행 작업의 번거로움
  * DAO가 늘어날 수록 main() 메소드를 통한 테스트를 위해 그만큼 갯수가 증가된다면 모든 테스트를 위해 main() 메소드 전체를 계속 수행하고
  * 결과를 개발자가 직접 비교 확인해야하는 작업을 거쳐야 한다


</br></br>

### Reference
> 토비의 스프링3.1 Vol.1 스프링의 이해와 원리 - 이일민 지음



